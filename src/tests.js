import { Regle } from "./Regle.js";
import { MatchState, MatchStatus } from "./MatchState.js";
import { CombattantCouleur, EvenementCarton, EvenementTouche, } from "./Evenement.js";
import { CartonCouleur } from "./Carton.js";
import { MatchModel } from "./MatchModel.js";
import { EventLogCarton, EventLogMortSubite, EventLogTouche } from "./EventLog.js";
import { ToucheNom } from "./Touche.js";
import { MortSubite } from "./MortSubite.js";
function test1(regle) {
    const matchState = new MatchState();
    matchState.historique.push(new EvenementCarton(0, CombattantCouleur.rouge, CartonCouleur.jaune));
    const matchModel = new MatchModel(matchState, regle);
    if (matchModel.scores.rouge !== 0 || matchModel.scores.vert !== 3) {
        console.error("Test1 failed", matchModel);
    }
    if (matchModel.eventLog.length !== 1 &&
        !(matchModel.eventLog[0] instanceof EventLogCarton)) {
        console.error("Test3 eventLog failed", matchModel);
    }
    console.log("Test1 passed");
}
function test2(regle) {
    const matchState = new MatchState();
    matchState.historique.push(new EvenementTouche(0, CombattantCouleur.rouge, ToucheNom.bras));
    const matchModel = new MatchModel(matchState, regle);
    if (matchModel.scores.rouge !== 3 || matchModel.scores.vert !== 0) {
        console.error("Test2 failed", matchModel);
    }
    if (matchModel.eventLog.length !== 1 &&
        !(matchModel.eventLog[0] instanceof EventLogTouche)) {
        console.error("Test3 eventLog failed", matchModel);
    }
    console.log("Test2 passed");
}
function test3(regle) {
    const matchState = new MatchState();
    matchState.status = MatchStatus.en_cours;
    matchState.historique.push(new EvenementTouche(0, CombattantCouleur.rouge, ToucheNom.tete));
    matchState.historique.push(new EvenementTouche(2, CombattantCouleur.rouge, ToucheNom.tete));
    matchState.historique.push(new EvenementTouche(4, CombattantCouleur.vert, ToucheNom.tete));
    matchState.historique.push(new EvenementTouche(6, CombattantCouleur.vert, ToucheNom.tete));
    const matchModel = new MatchModel(matchState, regle);
    if (matchModel.scores.rouge !== 10 || matchModel.scores.vert !== 10) {
        console.error("Test3 score 10 failed", matchModel);
    }
    if (matchModel.mortSubite !== MortSubite.limite) {
        console.error("Test3 MortSubite failed", matchModel);
    }
    if (matchState.status !== MatchStatus.en_cours) {
        console.error("Test3 MortSubite failed", matchModel);
    }
    if (matchModel.eventLog.length !== 5 &&
        !(matchModel.eventLog[5] instanceof EventLogMortSubite)) {
        console.error("Test3 eventLog failed", matchModel);
    }
    console.log("Test3 passed");
}
function test4(regle) {
    const matchState = new MatchState();
    matchState.status = MatchStatus.en_cours;
    matchState.historique.push(new EvenementTouche(0, CombattantCouleur.rouge, ToucheNom.tete));
    matchState.historique.push(new EvenementTouche(6, CombattantCouleur.vert, ToucheNom.tete));
    matchState.time = regle.duree + 2;
    const matchModel = new MatchModel(matchState, regle);
    if (matchModel.scores.rouge !== 5 || matchModel.scores.vert !== 5) {
        console.error("Test4 score 10 failed", matchModel);
    }
    if (matchModel.mortSubite !== MortSubite.prolongation) {
        console.error("Test4 MortSubite failed", matchModel);
    }
    if (matchState.status !== MatchStatus.en_cours) {
        console.error("Test4 status failed", matchModel);
    }
    if (matchModel.eventLog.length !== 3 &&
        !(matchModel.eventLog[5] instanceof EventLogMortSubite)) {
        console.error("Test4 eventLog failed", matchModel);
    }
    console.log("Test4 passed");
}
export function tests() {
    const regle = Regle.getRegleByNom("tests");
    test1(regle);
    test2(regle);
    test3(regle);
    test4(regle);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0ZXN0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBQ2pDLE9BQU8sRUFBQyxVQUFVLEVBQUUsV0FBVyxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDeEQsT0FBTyxFQUFDLGlCQUFpQixFQUFFLGVBQWUsRUFBRSxlQUFlLEdBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNwRixPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sYUFBYSxDQUFDO0FBQzFDLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUMzQyxPQUFPLEVBQUMsY0FBYyxFQUFFLGtCQUFrQixFQUFFLGNBQWMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUNqRixPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sYUFBYSxDQUFDO0FBQ3RDLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUUzQyxTQUFTLEtBQUssQ0FBQyxLQUFZO0lBQ3ZCLE1BQU0sVUFBVSxHQUFHLElBQUksVUFBVSxFQUFFLENBQUM7SUFDcEMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQ3RCLElBQUksZUFBZSxDQUFDLENBQUMsRUFBRSxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUN2RSxDQUFDO0lBQ0YsTUFBTSxVQUFVLEdBQUcsSUFBSSxVQUFVLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3JELElBQUksVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssQ0FBQyxJQUFJLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ2hFLE9BQU8sQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFDRCxJQUNJLFVBQVUsQ0FB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