<!DOCTYPE html>
<html lang="fr">
<head>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta charset="utf-8">
    <link href="manifest.json" rel="manifest"/>
    <link href="images/light-sabers-couleur.svg" rel="icon" type="image/svg+xml"/>
    <link href="style.css" rel="stylesheet"/>
    <title>Match sabre laser</title>
</head>
<body class="dark">
<div id="background-image"></div>
<div id="combat" style="display: block">
    <div style="text-align: left">
        <div style="display: inline-block">
            <button id="play" onclick="gui.play()" style="display: inline-block">
                <img alt="démarrer le combat" src="images/play.svg" title="démarrer le combat"/>
            </button>
            <button id="pause" onclick="gui.play()" style="display: none">
                <img alt="mettre en pause le combat" src="images/pause.svg" title="mettre en pause le combat"/>
            </button>
            <button id="reset" onclick="gui.reset()">
                <img alt="Nouveau combat" src="images/light-sabers-couleur.svg" title="Nouveau combat"/>
            </button>
            <button onclick="gui.annuler()">
                <img alt="Supprimer la dernière action" src="images/abort.svg" title="Supprimer la dernière action"/>
            </button>
            <button onclick="gui.showConfig()">
                <img alt="Configuration" src="images/gear.svg" title="Configuration"/>
            </button>
        </div>
        <div id="time" style="display: inline-block">00:00</div>
        <div id="message" style="display: inline-block">Prêt?</div>

    </div>
    <table id="tableCombattants">
        <thead>
        <tr>
            <th><span class="vertCombattant">Vert</span></th>
            <th><span class="rougeCombattant">Rouge</span></th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td id="scoreVert">
                0
            </td>
            <td id="scoreRouge">
                0
            </td>
        </tr>
        <tr>
            <td id="touchesVert"></td>
            <td id="touchesRouge"></td>
        </tr>
        <tr>
            <td id="cartonsVert"></td>
            <td id="cartonsRouge"></td>
        </tr>
        </tbody>
    </table>
    <div id="historique"></div>
</div>
<div id="config" style="display: none">
    <div>
        <h2 style="display: inline-block">Configuration</h2>
        <button onclick="gui.hideConfig()">[X]</button>
    </div>
    Décompte des points d'un match de sabre laser au plus proche de la
    <a href="https://www.ffescrime.fr/media-documents/?thematic=sabre-laser">FFE</a>.<br/>
    <div style="align-content: center; text-align: center">
        <label for="changeRegle">Règles:</label>
        <select id="changeRegle" onchange="gui.changeRegle()">
            <option value="FFE">FFE</option>
            <option value="testing">testing</option>
        </select>
        <div id="ruleEditor">
            Modification de la règle "personnalisée":<br/>
            <table style="display: inline-table">
                <tr>
                    <td><label for="duree">Durée du match (sec)</label></td>
                    <td><input id="duree" max="1200" min="5" onchange="gui.changeValeurRegles(this)" step="5"
                               type="number"
                               value="180"/></td>
                </tr>
                <tr>
                    <td><label for="prolongation">Durée de la prolongation (sec)</label></td>
                    <td><input id="prolongation" max="180" min="0" onchange="gui.changeValeurRegles(this)" step="1"
                               type="number"
                               value="30"/></td>
                </tr>
                <tr>
                    <td><label for="mortSubiteScore">Score mort subite</label></td>
                    <td><input id="mortSubiteScore" max="100" min="0" onchange="gui.changeValeurRegles(this)" step="1"
                               type="number"
                               value="10"/></td>
                </tr>
                <tr>
                    <td><label for="scoreMax">Score gagnant</label></td>
                    <td><input id="scoreMax" max="100" min="1" onchange="gui.changeValeurRegles(this)" step="1"
                               type="number"
                               value="15"/></td>
                </tr>
                <tr>
                    <th>Touches</th>
                    <td>Points</td>
                    <td>Mort subite</td>
                    <td>Prolongation</td>
                </tr>
                <tr>
                    <td>
                        <label for="touche_points_main">
                            Main
                            <img alt="touche main" src="images/main.svg" title="touche main"/>
                        </label>
                    </td>
                    <td>
                        <input id="touche_points_main" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1"
                               type="number" value="1"/>
                    </td>
                    <td>
                        <input id="touche_mortSubite_main" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1" type="checkbox" value="1"/>
                    </td>
                    <td>
                        <input id="touche_prolongation_main" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1" type="checkbox" value="1"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="touche_points_bras">
                            Bras
                            <img alt="touche bras" src="images/bras.svg" title="touche bras"/>
                        </label>
                    </td>
                    <td>
                        <input id="touche_points_bras" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1"
                               type="number" value="3"/>
                    </td>
                    <td>
                        <input id="touche_mortSubite_bras" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1" type="checkbox" value="3"/>
                    </td>
                    <td>
                        <input id="touche_prolongation_bras" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1" type="checkbox" value="3"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="touche_points_jambe">
                            Jambe
                            <img alt="touche jambe" src="images/jambe.svg" title="touche jambe"/>
                        </label>
                    </td>
                    <td>
                        <input id="touche_points_jambe" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1"
                               type="number" value="3"/>
                    </td>
                    <td>
                        <input id="touche_mortSubite_jambe" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1" type="checkbox" value="3"/>
                    </td>
                    <td>
                        <input id="touche_prolongation_jambe" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1" type="checkbox" value="3"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="touche_points_tronc">
                            Tronc
                            <img alt="touche tronc" src="images/tronc.svg" title="touche tronc"/>
                        </label>
                    </td>
                    <td>
                        <input id="touche_points_tronc" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1"
                               type="number" value="5"/>
                    </td>
                    <td>
                        <input checked="checked" id="touche_mortSubite_tronc" max="100" min="1"
                               onchange="gui.changeValeurRegles(this)" step="1" type="checkbox" value="5"/>
                    </td>
                    <td>
                        <input checked="checked" id="touche_prolongation_tronc" max="100" min="1"
                               onchange="gui.changeValeurRegles(this)" step="1" type="checkbox" value="5"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="touche_points_tête">
                            Tête
                            <img alt="touche tête" src="images/tete.svg" title="touche tête"/>
                        </label>
                    </td>
                    <td>
                        <input id="touche_points_tête" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1"
                               type="number" value="5"/>
                    </td>
                    <td>
                        <input checked="checked" id="touche_mortSubite_tête" max="100" min="1"
                               onchange="gui.changeValeurRegles(this)" step="1" type="checkbox" value="5"/>
                    </td>
                    <td>
                        <input checked="checked" id="touche_prolongation_tête" max="100" min="1"
                               onchange="gui.changeValeurRegles(this)" step="1" type="checkbox" value="5"/>
                    </td>
                </tr>
                <tr>
                    <th>Cartons</th>
                    <td>Points</td>
                    <td colspan="2">Carton Supérieur</td>
                </tr>
                <tr>
                    <td>
                        Blanc
                        <label for="carton_points_blanc">
                            <img alt="carton blanc" src="images/carton-blanc.svg" title="carton blanc"/>
                        </label>
                    </td>
                    <td>
                        <input id="carton_points_blanc" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1"
                               type="number" value="0"/>
                    </td>
                    <td>
                        <select id="carton_sup_blanc" style="border-radius: 2px;">
                            <option style="background-color: white; color: black" value="blanc">Blanc</option>
                            <option selected="selected" style="background-color: yellow; color: black" value="jaune">
                                Jaune
                            </option>
                            <option style="background-color: red; color: black" value="rouge">Rouge</option>
                            <option style="background-color: black; color: white" value="Noir">Noir</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        Jaune
                        <label for="carton_points_jaune">
                            <img alt="carton jaune" src="images/carton-jaune.svg" title="carton jaune"/>
                        </label>
                    </td>
                    <td>
                        <input id="carton_points_jaune" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1"
                               type="number" value="3"/>
                    </td>
                    <td>
                        <select id="carton_sup_jaune" style="border-radius: 2px;">
                            <option style="background-color: white; color: black" value="blanc">Blanc</option>
                            <option style="background-color: yellow; color: black" value="jaune">Jaune</option>
                            <option selected="selected" style="background-color: red; color: black" value="rouge">
                                Rouge
                            </option>
                            <option style="background-color: black; color: white" value="Noir">Noir</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        Rouge
                        <label for="carton_points_rouge">
                            <img alt="carton rouge" src="images/carton-rouge.svg" title="carton rouge"/>
                        </label>
                    </td>
                    <td>
                        <input id="carton_points_rouge" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1"
                               type="number" value="5"/>
                    </td>
                    <td>
                        <select id="carton_sup_rouge" style="border-radius: 2px;">
                            <option style="background-color: white; color: black" value="blanc">Blanc</option>
                            <option style="background-color: yellow; color: black" value="jaune">Jaune</option>
                            <option style="background-color: red; color: black" value="rouge">Rouge</option>
                            <option selected="selected" style="background-color: black; color: white" value="Noir">
                                Noir
                            </option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        Noir
                        <label for="carton_points_noir">
                            <img alt="carton noir" src="images/carton-noir.svg" title="carton noir"/>
                        </label>
                    </td>
                    <td>
                        <input id="carton_points_noir" max="100" min="1" onchange="gui.changeValeurRegles(this)"
                               step="1"
                               type="number" value="0"/>
                    </td>
                    <td>
                        <select id="carton_sup_noir" style="border-radius: 2px;">
                            <option style="background-color: white; color: black" value="blanc">Blanc</option>
                            <option style="background-color: yellow; color: black" value="jaune">Jaune</option>
                            <option style="background-color: red; color: black" value="rouge">Rouge</option>
                            <option selected="selected" style="background-color: black; color: white" value="Noir">
                                Noir
                            </option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <br/>
    Les sources sont disponibles <a href="https://github.com/yannickbattail/sabre-laser-match">ici</a>.<br/>
    Si vous avez des idées d'amélioration ou un bug, n'hésitez à créer un ticket
    <a href="https://github.com/yannickbattail/sabre-laser-match/issues">ici</a>.<br/>
    <br/>
    Les icônes viennent de <a href="https://game-icons.net/">game-icons.net</a>.<br/>
</div>
<script type="module">
    import {MatchState} from "./MatchState.js";
    import {Gui} from "./Gui.js";
    import {tests} from "./tests.js";

    window.gui = new Gui(new MatchState());
    tests();
</script>
</body>
</html>
